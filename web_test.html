<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>RAG Agent Quick Test</title>
  <style>
    body { font-family: ui-sans-serif, system-ui; max-width: 720px; margin: 40px auto; }
    textarea { width: 100%; height: 90px; }
    pre { background: #f6f8fa; padding: 12px; white-space: pre-wrap; }
    button { padding: 8px 14px; }
  </style>
</head>
<body>
  <h2>RAG Agent Quick Test</h2>
  <p>輸入你的問題，按送出。</p>
  <textarea id="q">VIP2 現貨 taker 手續費是多少？</textarea><br/>
  <button id="send">送出</button>
  <h3>回應</h3>
  <pre id="ans"></pre>
  <h3>原始 JSON</h3>
  <pre id="raw"></pre>

  <script>
    const $q = document.getElementById('q');
    const $ans = document.getElementById('ans');
    const $raw = document.getElementById('raw');
    document.getElementById('send').onclick = async () => {
      $ans.textContent = '思考中...';
      const r = await fetch('http://127.0.0.1:8000/chat', {
        method: 'POST',
        headers: {'Content-Type':'application/json'},
        body: JSON.stringify({ q: $q.value, history: [] })
      });
      const j = await r.json();
      $raw.textContent = JSON.stringify(j, null, 2);
      $ans.textContent = j.answer || '(無回答)';
    };
  </script>
</body>
</html>
